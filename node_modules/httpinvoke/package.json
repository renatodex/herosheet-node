{
  "name": "httpinvoke",
  "version": "1.0.4",
  "description": "a small, no-dependencies HTTP client library for browsers and Node.js with a promise-based or Node.js-style callback-based API to progress events, text and binary file upload and download, request and response headers, status code.",
  "keywords": [
    "http",
    "ajax",
    "request",
    "xhr",
    "connection",
    "https",
    "get",
    "head",
    "post",
    "put",
    "delete",
    "download",
    "upload",
    "browser",
    "ender",
    "browserify",
    "xmlhttprequest",
    "web"
  ],
  "main": "./httpinvoke-commonjs.js",
  "private": false,
  "dependencies": {},
  "devDependencies": {
    "mime": "1.2.x",
    "sizzle": "1.1.x",
    "JSON2": "0.1.x",
    "es5-shim": "2.1.x",
    "grunt": "0.4.x",
    "grunt-cli": "0.1.x",
    "grunt-contrib-uglify": "0.2.x",
    "grunt-contrib-concat": "0.3.x",
    "grunt-mocha-test": "0.7.x",
    "daemon": "1.1.x",
    "mocha": "1.13.x",
    "karma": "0.11.x",
    "karma-mocha": "0.1.x"
  },
  "scripts": {
    "test": "node ./dummyserver.js;./node_modules/.bin/grunt test;kill $(cat ./dummyserver.pid);rm ./dummyserver.pid",
    "test-browser": "./node_modules/.bin/grunt;node ./dummyserver.js;./node_modules/.bin/karma start;kill $(cat ./dummyserver.pid);rm ./dummyserver.pid",
    "test-node": "./node_modules/.bin/grunt;node ./dummyserver.js;./node_modules/.bin/mocha --watch;kill $(cat ./dummyserver.pid);rm ./dummyserver.pid"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/jakutis/httpinvoke"
  },
  "author": {
    "name": "Vytautas Jakutis",
    "email": "vytautas@jakut.is",
    "url": "https://jakut.is/"
  },
  "contributors": [],
  "readme": "# httpinvoke\n\nhttpinvoke is a 4.6kb no-dependencies HTTP client library for **browsers** and **Node.js** with a **promise**-based or Node.js-style callback-based API to **progress events**, text and **binary** file **upload** and **download**, request and response headers, status code.\n\n[Ask a question](https://news.ycombinator.com/item?id=6498905)\n\n* Gracefully upgrades to latest platform-specific features:\n  * [cross-origin resource sharing](http://www.w3.org/TR/cors/) - do cross-domain requests with confidence;\n  * [progress events](http://www.w3.org/TR/progress-events/) - get current and total bytes downloaded or uploaded;\n  * [binary file uploads and downloads](http://www.w3.org/TR/XMLHttpRequest/) - easily use Blob, FormData, ArrayBuffer, Uint8Array or a simple array of bytes.\n* Supports both NodeJS style callbacks and [Promises/A+](http://promisesaplus.com/) (with progress events, see [an example](https://github.com/jakutis/httpinvoke/blob/master/test/promise.js)).\n* Supports transparent gzip/deflate content decoding.\n* Handles HTTP responses The Right Wayâ„¢:\n  * Tries hard to get the HTTP response status code in all cases.\n  * Emits the HTTP response status code and headers as soon as they are available.\n  * Gives you HTTP status code instead of an error, that is for example HTTP 404 would just return success, with status 404.\n  * Throws an error only when the HTTP request did not actually completely finished.\n* Well tested - over 277 unit tests.\n* Detects the presence of [CommonJS](http://www.commonjs.org/) and [AMD](https://www.google.com/search?q=advanced+module+definition) script loaders.\n* Supports [npm](https://npmjs.org/), [Bower](http://bower.io/) and [Component](http://component.io/) package managers.\n* Tested on these web browsers:\n  * Internet Explorer 6 and later;\n  * Firefox 1.5 and later;\n  * Chrome 1 and later;\n  * Safari 4.0 and later;\n  * Opera 10.50 and later;\n  * Mobile Safari 7.0.0;\n  * Kindle 3.0.0;\n  * Android 2.3.7.\n\n## Installation\n\n#### manually\n\nAdding to your HTML file:\n\n    <script src=\"/path_to_http_invoke/httpinvoke-browser.js\"></script>\n\n#### with [npm](https://npmjs.org/package/httpinvoke)\n\n    npm install --save httpinvoke\n\n#### with [Bower](http://bower.io)\n\n    bower install --save httpinvoke\n\n#### with [Component](http://component.io/jakutis/httpinvoke)\n\n    component install jakutis/httpinvoke\n\n## Examples\n\n```javascript\nhttpinvoke('http://example.org', 'GET', function(err, body, statusCode, headers) {\n    if(err) {\n        return console.log('Failure', err);\n    }\n    console.log('Success', body, statusCode, headers);\n});\n\n// same as above, but using promise\nhttpinvoke('http://example.org', 'GET').then(function(res) {\n    console.log('Success', res.body, res.statusCode, res.headers);\n}, function(err) {\n    console.log('Failure', err);\n});\n\n// Demonstration of downloading and uploading a file\nvar converters = {\n    'text json': JSON.parse,\n    'json text': JSON.stringify\n};\nhttpinvoke('https://bower-component-list.herokuapp.com/', 'GET', {\n    outputType: 'json',\n    converters: converters\n}).then(function(response) {\n    console.log('There are ' + response.body.length + ' bower packages.');\n    return httpinvoke('http://server.cors-api.appspot.com/server?id=9285649&enable=true&status=200&credentials=false&methods=POST', 'POST', {\n        input: response.body,\n        inputType: 'json',\n        converters: converters\n    });\n}, function(err) {\n    console.log('Error receiving package list', err);\n}, function(progress) {\n    console.log('Receiving package list progress', progress);\n}).then(function(response) {\n    console.log('Uploading finished', response);\n}, function(err) {\n    console.log('Error sending package list', err);\n}, function(progress) {\n    console.log('Sending package list progress', progress);\n});\n```\n\n## API\n\n    var abort = httpinvoke(url, method, options, cb)\n\nAny one, two or three arguments can be skipped, except the **url**.\n\n* **abort** is a function for aborting the HTTP request. It is also a [Promise/A+](http://promisesaplus.com/)-compliant promise (has the `then()` method) that receives all the same events as the callbacks - **uploading**, **downloading**, **gotStatus** and **finished** - see [an example](https://github.com/jakutis/httpinvoke/blob/master/test/promiseSpec.js). When invoked as a function, it immediately calls the \"finished\" callback with an Error. If \"finished\" callback is already called before the \"abort\", nothing happens.\n* **url** is a string for URL, e.g. `\"http://example.org/\"`.\n* **method** is a string for HTTP method, one of `\"HEAD\"`, `\"GET\"`, `\"PATCH\"`, `\"POST\"`, `\"PUT\"`, `\"DELETE\"`.\n* **options** is an object for various options (see the Options section below) or a function, which is used as a \"finished\" option (see the first example).\n* **cb** is a function that is used as an option **finished** (read below).\n\n#### Options\n\nSee the Examples section for all the options being used.\nAll options are optional.\n\n* **timeout** is a number of milliseconds that specifies when **finished** has to be called with an Error if it was not yet called, default is `0`, which means timeout errors are disabled (network stack timeouts result in network errors).\n* **uploading** is a function that is called when HTTP request upload progress event happens. It is called with these arguments:\n  0. **current** is a number for the number of bytes currently sent;\n  0. **total** is a number for the total number of bytes to be sent.\n* **downloading** is a function that is called when HTTP response download progress event happens. It is called with these arguments:\n  0. **current** is a number for the number of bytes currently received;\n  0. **total** is a number for the total number of bytes to be received, or undefined if not known.\n* **gotStatus** is a function that is called when HTTP response headers are received. It is called with these arguments:\n  0. **status** is a number for an HTTP response status code, either undefined, or a correct value.\n  0. **headers** is an object for HTTP response headers. Keys are lower-cased header names, values are strings.\n* **finished** is a function that is called when HTTP response is fully downloaded, or any error happens. It is called with these arguments:\n  0. **err** is null or an object that is an instance of Error, **please read error conditions section below**;\n  0. **output** is:\n      * undefined, if err is not null or no response entity has been received (e.g. when **method** is `\"HEAD\"`),\n      * a string, if **outputType** is `\"text\"`,\n      * a bytearray - instance of [Uint8Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays/Uint8Array) or instance of [Buffer](http://nodejs.org/api/buffer.html) or instance of [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array) that has elements of type \"number\" with values ranging from `0` to `255` - if **outputType** is `\"bytearray\"`,\n      * any value - if **outputType** is neither `\"bytearray\"`, nor `\"text\"`, i.e. a converter has been called.\n  0. **status** is:\n      * undefined, if err is not null or no correct value is available,\n      * otherwise, a number for an HTTP response status code, correct value.\n  0. **headers** is:\n      * undefined, if err is not null,\n      * otherwise, an object for HTTP response headers. Keys are lower-cased header names, values are strings.\n* **outputType** is a string for the type of the **output** argument of the **finished** option, one of `\"text\"` (default), `\"bytearray\"` or a custom value that has corresponding **converters**.\n* **inputType** is a string for the type of the **input** option, one of `\"auto\"`(default), `\"bytearray\"`, `\"text\"` or a custom value that has corresponding **converters**. If not `\"auto\"`, **input** must be not be undefined.\n* **input** must be either one of:\n  * undefined (default), if **inputType** is `\"auto\"` and request **headers** does not have `Content-Type`,\n  * a string, if **inputType** is `\"text\"` or `\"auto\"`,\n  * a bytearray - instance of [ArrayBuffer](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays/ArrayBuffer) or instance of [ArrayBufferView](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays/ArrayBufferView) or instance of [Blob](https://developer.mozilla.org/en-US/docs/Web/API/Blob) or instance of [File](https://developer.mozilla.org/en-US/docs/Web/API/File) or instance of [Buffer](http://nodejs.org/api/buffer.html) or instance of [Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array) that has elements of type \"number\" with values ranging from `0` to `255` - if **inputType** is `\"bytearray\"` or `\"auto\"`.\n* **headers** is an object for HTTP request headers. Keys are header names, values are strings.\n* **converters** is an object to convert custom **inputType** and **outputType** values to `\"bytearray\"` or `\"text\"`. Example: `{\"json text\": JSON.stringify, \"text json\": JSON.parse}`. If you use custom **inputType**, then there must be at least one converter from that type to `\"text\"` or `\"bytearray\"`, and the other way around for **outputType**.\n* **corsExposedHeaders** is an array of HTTP response headers to be extracted in **gotStatus** call. Default simple headers like \"Content-Type\" are always extracted. Applicable only for cross-origin requests.\n* **corsCredentials** is a boolean for requesting to send credentials. Applicable only for a cross-origin request. See Feature Flags section. Defaults to `false`.\n* **corsOriginHeader** is a string for the request header name for browsers with buggy CORS implementations (e.g. Android Browser 2.3.7) - which do not send the Origin request header in actual request. By default **corsOriginHeader** is not set, as it needs a proper `Access-Control-Allow-Headers` server-side header, see `dummyserver.js` for an example of server-side part of the workaround implementation.\n\n#### Error Conditions\n\nThe **finished** callback will be called with an instance of Error only when strictly either one of these things happen:\n\n* **abort** function was called (error message \"abort\");\n* sending request failed (error message \"upload error\");\n* sending request timed out (error message \"upload timeout\");\n* native XMLHttpRequest called .onerror without a .status or .statusText (error message \"download error\") - this can happen due to various network errors, server response sending errors, or simply an unsupported status code - e.g. Firefox 3.0 ends up here after a status 408 response;\n* receiving request timed out (error message \"download timeout\");\n* converter from **converters** option threw an error (the thrown error message is passed);\n* request did not even start - calling options validation failed or a feature that is not supported by the platform was used (various error messages are passed, e.g. \"Unsupported method TRACE\").\n\nSo generally, finishing with an error means that a response has not been received.\nPlease note that a request can finish successfully, with an **err** set to `null`, but also with an undefined **status**, undefined **output** and an empty **headers** object - generally **status** is defined at all times, but some older browsers provide status code only for 2XX responses - e.g. Opera 11.50.\n\n#### Callback Sequence\n\nThe callbacks are called in this strict sequence:\n\n0. **uploading** (two or more times);\n0. **gotStatus** (one time);\n0. **downloading** (two or more times);\n0. **finished** (one time), except the case that **finished** can be called with Error any time, and then no callbacks will be called.\n\n#### Feature Flags\n\nThere are feature flags to be queried for platform-specific features.\n\n    if(httpinvoke.cors) {\n        console.log('Cross-Origin Resource Sharing support is available!');\n    }\n\n* **requestTextOnly** - **inputType** `\"bytearray\"` is not supported\n* **cors** - [cross-origin resource sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) is available\n* **corsCredentials** - [cross-origin resource sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) supports sending cookies and HTTP authentication credentials\n* **corsResponseContentTypeOnly** - [cross-origin resource sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) supports only Content-Type response header\n* **corsRequestHeaders** - [cross-origin resource sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) supports setting request headers\n* **corsDELETE** - [cross-origin resource sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) supports `\"DELETE\"` **method**\n* **corsHEAD** - [cross-origin resource sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) supports `\"HEAD\"` **method**\n* **corsPATCH** - [cross-origin resource sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) supports `\"PATCH\"` **method**\n* **corsPUT** - [cross-origin resource sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) supports `\"PUT\"` **method**\n* **corsStatus** - [cross-origin resource sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) supports **status** argument in **gotStatus** option\n* **corsResponseTextOnly** - [cross-origin resource sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) supports only **outputType** `\"text\"`\n\n## Development\n\nTo test for NodeJS functionality run `npm run test-node`.\n\nTo test for web browser functionality run `npm run test-browser`, copy the URL link that is displayed in console and open it in any web browser.\n\n#### Checklist before releasing\n\n* package.json, bower.json and component.json version number bumped\n* file size, number of tests in readme.markdown updated\n* httpinvoke-* files regenerated\n\n## License\n\n    The MIT License (MIT)\n\n    Copyright (c) 2013 Vytautas Jakutis <vytautas@jakut.is>\n\n    Permission is hereby granted, free of charge, to any person obtaining a copy of\n    this software and associated documentation files (the \"Software\"), to deal in\n    the Software without restriction, including without limitation the rights to\n    use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n    the Software, and to permit persons to whom the Software is furnished to do so,\n    subject to the following conditions:\n\n    The above copyright notice and this permission notice shall be included in all\n    copies or substantial portions of the Software.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n    FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n    COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n    IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n    CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n",
  "readmeFilename": "readme.markdown",
  "bugs": {
    "url": "https://github.com/jakutis/httpinvoke/issues"
  },
  "_id": "httpinvoke@1.0.4",
  "dist": {
    "shasum": "cf2c411f95fa0face70e093bcc749b3bda214aa2"
  },
  "_from": "httpinvoke@",
  "_resolved": "https://registry.npmjs.org/httpinvoke/-/httpinvoke-1.0.4.tgz"
}
